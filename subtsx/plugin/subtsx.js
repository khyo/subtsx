var ot=Object.create;var ve=Object.defineProperty;var st=Object.getOwnPropertyDescriptor;var ut=Object.getOwnPropertyNames;var ft=Object.getPrototypeOf,ct=Object.prototype.hasOwnProperty;var dt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ht=(e,t)=>{for(var r in t)ve(e,r,{get:t[r],enumerable:!0})},Te=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let l of ut(t))!ct.call(e,l)&&l!==r&&ve(e,l,{get:()=>t[l],enumerable:!(i=st(t,l))||i.enumerable});return e};var Oe=(e,t,r)=>(r=e!=null?ot(ft(e)):{},Te(t||!e||!e.__esModule?ve(r,"default",{value:e,enumerable:!0}):r,e)),mt=e=>Te(ve({},"__esModule",{value:!0}),e);var rt=dt((rr,tt)=>{"use strict";var Me=Object.defineProperty,gt=Object.getOwnPropertyDescriptor,wt=Object.getOwnPropertyNames,pt=Object.prototype.hasOwnProperty,yt=(e,t)=>{for(var r in t)Me(e,r,{get:t[r],enumerable:!0})},vt=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let l of wt(t))!pt.call(e,l)&&l!==r&&Me(e,l,{get:()=>t[l],enumerable:!(i=gt(t,l))||i.enumerable});return e},bt=e=>vt(Me({},"__esModule",{value:!0}),e),pe={};yt(pe,{analyzeMetafile:()=>qt,analyzeMetafileSync:()=>Ht,build:()=>Rt,buildSync:()=>Yt,context:()=>Ut,default:()=>Xt,formatMessages:()=>zt,formatMessagesSync:()=>Vt,initialize:()=>Qt,transform:()=>Wt,transformSync:()=>Jt,version:()=>It});tt.exports=bt(pe);function _e(e){let t=i=>{if(i===null)r.write8(0);else if(typeof i=="boolean")r.write8(1),r.write8(+i);else if(typeof i=="number")r.write8(2),r.write32(i|0);else if(typeof i=="string")r.write8(3),r.write(re(i));else if(i instanceof Uint8Array)r.write8(4),r.write(i);else if(i instanceof Array){r.write8(5),r.write32(i.length);for(let l of i)t(l)}else{let l=Object.keys(i);r.write8(6),r.write32(l.length);for(let s of l)r.write(re(s)),t(i[s])}},r=new ze;return r.write32(0),r.write32(e.id<<1|+!e.isRequest),t(e.value),Ce(r.buf,r.len-4,0),r.buf.subarray(0,r.len)}function xt(e){let t=()=>{switch(r.read8()){case 0:return null;case 1:return!!r.read8();case 2:return r.read32();case 3:return de(r.read());case 4:return r.read();case 5:{let a=r.read32(),h=[];for(let o=0;o<a;o++)h.push(t());return h}case 6:{let a=r.read32(),h={};for(let o=0;o<a;o++)h[de(r.read())]=t();return h}default:throw new Error("Invalid packet")}},r=new ze(e),i=r.read32(),l=(i&1)===0;i>>>=1;let s=t();if(r.ptr!==e.length)throw new Error("Invalid packet");return{id:i,isRequest:l,value:s}}var ze=class{constructor(e=new Uint8Array(1024)){this.buf=e,this.len=0,this.ptr=0}_write(e){if(this.len+e>this.buf.length){let t=new Uint8Array((this.len+e)*2);t.set(this.buf),this.buf=t}return this.len+=e,this.len-e}write8(e){let t=this._write(1);this.buf[t]=e}write32(e){let t=this._write(4);Ce(this.buf,e,t)}write(e){let t=this._write(4+e.length);Ce(this.buf,e.length,t),this.buf.set(e,t+4)}_read(e){if(this.ptr+e>this.buf.length)throw new Error("Invalid packet");return this.ptr+=e,this.ptr-e}read8(){return this.buf[this._read(1)]}read32(){return qe(this.buf,this._read(4))}read(){let e=this.read32(),t=new Uint8Array(e),r=this._read(t.length);return t.set(this.buf.subarray(r,r+e)),t}},re,de,Ae;if(typeof TextEncoder<"u"&&typeof TextDecoder<"u"){let e=new TextEncoder,t=new TextDecoder;re=r=>e.encode(r),de=r=>t.decode(r),Ae='new TextEncoder().encode("")'}else if(typeof Buffer<"u")re=e=>Buffer.from(e),de=e=>{let{buffer:t,byteOffset:r,byteLength:i}=e;return Buffer.from(t,r,i).toString()},Ae='Buffer.from("")';else throw new Error("No UTF-8 codec found");if(!(re("")instanceof Uint8Array))throw new Error(`Invariant violation: "${Ae} instanceof Uint8Array" is incorrectly false

This indicates that your JavaScript environment is broken. You cannot use
esbuild in this environment because esbuild relies on this invariant. This
is not a problem with esbuild. You need to fix your environment instead.
`);function qe(e,t){return e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24}function Ce(e,t,r){e[r++]=t,e[r++]=t>>8,e[r++]=t>>16,e[r++]=t>>24}var Q=JSON.stringify,Be="warning",Ne="silent";function Le(e){if(H(e,"target"),e.indexOf(",")>=0)throw new Error(`Invalid target: ${e}`);return e}var Ee=()=>null,W=e=>typeof e=="boolean"?null:"a boolean",p=e=>typeof e=="string"?null:"a string",Se=e=>e instanceof RegExp?null:"a RegExp object",oe=e=>typeof e=="number"&&e===(e|0)?null:"an integer",Ye=e=>typeof e=="function"?null:"a function",q=e=>Array.isArray(e)?null:"an array",te=e=>typeof e=="object"&&e!==null&&!Array.isArray(e)?null:"an object",$t=e=>typeof e=="object"&&e!==null?null:"an array or an object",Et=e=>e instanceof WebAssembly.Module?null:"a WebAssembly.Module",Ie=e=>typeof e=="object"&&!Array.isArray(e)?null:"an object or null",Je=e=>typeof e=="string"||typeof e=="boolean"?null:"a string or a boolean",St=e=>typeof e=="string"||typeof e=="object"&&e!==null&&!Array.isArray(e)?null:"a string or an object",kt=e=>typeof e=="string"||Array.isArray(e)?null:"a string or an array",Ve=e=>typeof e=="string"||e instanceof Uint8Array?null:"a string or a Uint8Array",jt=e=>typeof e=="string"||e instanceof URL?null:"a string or a URL";function n(e,t,r,i){let l=e[r];if(t[r+""]=!0,l===void 0)return;let s=i(l);if(s!==null)throw new Error(`${Q(r)} must be ${s}`);return l}function J(e,t,r){for(let i in e)if(!(i in t))throw new Error(`Invalid option ${r}: ${Q(i)}`)}function Pt(e){let t=Object.create(null),r=n(e,t,"wasmURL",jt),i=n(e,t,"wasmModule",Et),l=n(e,t,"worker",W);return J(e,t,"in initialize() call"),{wasmURL:r,wasmModule:i,worker:l}}function He(e){let t;if(e!==void 0){t=Object.create(null);for(let r in e){let i=e[r];if(typeof i=="string"||i===!1)t[r]=i;else throw new Error(`Expected ${Q(r)} in mangle cache to map to either a string or false`)}}return t}function ke(e,t,r,i,l){let s=n(t,r,"color",W),a=n(t,r,"logLevel",p),h=n(t,r,"logLimit",oe);s!==void 0?e.push(`--color=${s}`):i&&e.push("--color=true"),e.push(`--log-level=${a||l}`),e.push(`--log-limit=${h||0}`)}function H(e,t,r){if(typeof e!="string")throw new Error(`Expected value for ${t}${r!==void 0?" "+Q(r):""} to be a string, got ${typeof e} instead`);return e}function Qe(e,t,r){let i=n(t,r,"legalComments",p),l=n(t,r,"sourceRoot",p),s=n(t,r,"sourcesContent",W),a=n(t,r,"target",kt),h=n(t,r,"format",p),o=n(t,r,"globalName",p),y=n(t,r,"mangleProps",Se),g=n(t,r,"reserveProps",Se),k=n(t,r,"mangleQuoted",W),L=n(t,r,"minify",W),B=n(t,r,"minifySyntax",W),_=n(t,r,"minifyWhitespace",W),R=n(t,r,"minifyIdentifiers",W),T=n(t,r,"lineLimit",oe),z=n(t,r,"drop",q),Y=n(t,r,"dropLabels",q),b=n(t,r,"charset",p),w=n(t,r,"treeShaking",W),d=n(t,r,"ignoreAnnotations",W),u=n(t,r,"jsx",p),x=n(t,r,"jsxFactory",p),O=n(t,r,"jsxFragment",p),F=n(t,r,"jsxImportSource",p),E=n(t,r,"jsxDev",W),f=n(t,r,"jsxSideEffects",W),c=n(t,r,"define",te),v=n(t,r,"logOverride",te),A=n(t,r,"supported",te),D=n(t,r,"pure",q),C=n(t,r,"keepNames",W),j=n(t,r,"platform",p),M=n(t,r,"tsconfigRaw",St);if(i&&e.push(`--legal-comments=${i}`),l!==void 0&&e.push(`--source-root=${l}`),s!==void 0&&e.push(`--sources-content=${s}`),a&&(Array.isArray(a)?e.push(`--target=${Array.from(a).map(Le).join(",")}`):e.push(`--target=${Le(a)}`)),h&&e.push(`--format=${h}`),o&&e.push(`--global-name=${o}`),j&&e.push(`--platform=${j}`),M&&e.push(`--tsconfig-raw=${typeof M=="string"?M:JSON.stringify(M)}`),L&&e.push("--minify"),B&&e.push("--minify-syntax"),_&&e.push("--minify-whitespace"),R&&e.push("--minify-identifiers"),T&&e.push(`--line-limit=${T}`),b&&e.push(`--charset=${b}`),w!==void 0&&e.push(`--tree-shaking=${w}`),d&&e.push("--ignore-annotations"),z)for(let S of z)e.push(`--drop:${H(S,"drop")}`);if(Y&&e.push(`--drop-labels=${Array.from(Y).map(S=>H(S,"dropLabels")).join(",")}`),y&&e.push(`--mangle-props=${y.source}`),g&&e.push(`--reserve-props=${g.source}`),k!==void 0&&e.push(`--mangle-quoted=${k}`),u&&e.push(`--jsx=${u}`),x&&e.push(`--jsx-factory=${x}`),O&&e.push(`--jsx-fragment=${O}`),F&&e.push(`--jsx-import-source=${F}`),E&&e.push("--jsx-dev"),f&&e.push("--jsx-side-effects"),c)for(let S in c){if(S.indexOf("=")>=0)throw new Error(`Invalid define: ${S}`);e.push(`--define:${S}=${H(c[S],"define",S)}`)}if(v)for(let S in v){if(S.indexOf("=")>=0)throw new Error(`Invalid log override: ${S}`);e.push(`--log-override:${S}=${H(v[S],"log override",S)}`)}if(A)for(let S in A){if(S.indexOf("=")>=0)throw new Error(`Invalid supported: ${S}`);let $=A[S];if(typeof $!="boolean")throw new Error(`Expected value for supported ${Q(S)} to be a boolean, got ${typeof $} instead`);e.push(`--supported:${S}=${$}`)}if(D)for(let S of D)e.push(`--pure:${H(S,"pure")}`);C&&e.push("--keep-names")}function Ot(e,t,r,i,l){var s;let a=[],h=[],o=Object.create(null),y=null,g=null;ke(a,t,o,r,i),Qe(a,t,o);let k=n(t,o,"sourcemap",Je),L=n(t,o,"bundle",W),B=n(t,o,"splitting",W),_=n(t,o,"preserveSymlinks",W),R=n(t,o,"metafile",W),T=n(t,o,"outfile",p),z=n(t,o,"outdir",p),Y=n(t,o,"outbase",p),b=n(t,o,"tsconfig",p),w=n(t,o,"resolveExtensions",q),d=n(t,o,"nodePaths",q),u=n(t,o,"mainFields",q),x=n(t,o,"conditions",q),O=n(t,o,"external",q),F=n(t,o,"packages",p),E=n(t,o,"alias",te),f=n(t,o,"loader",te),c=n(t,o,"outExtension",te),v=n(t,o,"publicPath",p),A=n(t,o,"entryNames",p),D=n(t,o,"chunkNames",p),C=n(t,o,"assetNames",p),j=n(t,o,"inject",q),M=n(t,o,"banner",te),S=n(t,o,"footer",te),$=n(t,o,"entryPoints",$t),N=n(t,o,"absWorkingDir",p),P=n(t,o,"stdin",te),I=(s=n(t,o,"write",W))!=null?s:l,V=n(t,o,"allowOverwrite",W),G=n(t,o,"mangleCache",te);if(o.plugins=!0,J(t,o,`in ${e}() call`),k&&a.push(`--sourcemap${k===!0?"":`=${k}`}`),L&&a.push("--bundle"),V&&a.push("--allow-overwrite"),B&&a.push("--splitting"),_&&a.push("--preserve-symlinks"),R&&a.push("--metafile"),T&&a.push(`--outfile=${T}`),z&&a.push(`--outdir=${z}`),Y&&a.push(`--outbase=${Y}`),b&&a.push(`--tsconfig=${b}`),F&&a.push(`--packages=${F}`),w){let m=[];for(let U of w){if(H(U,"resolve extension"),U.indexOf(",")>=0)throw new Error(`Invalid resolve extension: ${U}`);m.push(U)}a.push(`--resolve-extensions=${m.join(",")}`)}if(v&&a.push(`--public-path=${v}`),A&&a.push(`--entry-names=${A}`),D&&a.push(`--chunk-names=${D}`),C&&a.push(`--asset-names=${C}`),u){let m=[];for(let U of u){if(H(U,"main field"),U.indexOf(",")>=0)throw new Error(`Invalid main field: ${U}`);m.push(U)}a.push(`--main-fields=${m.join(",")}`)}if(x){let m=[];for(let U of x){if(H(U,"condition"),U.indexOf(",")>=0)throw new Error(`Invalid condition: ${U}`);m.push(U)}a.push(`--conditions=${m.join(",")}`)}if(O)for(let m of O)a.push(`--external:${H(m,"external")}`);if(E)for(let m in E){if(m.indexOf("=")>=0)throw new Error(`Invalid package name in alias: ${m}`);a.push(`--alias:${m}=${H(E[m],"alias",m)}`)}if(M)for(let m in M){if(m.indexOf("=")>=0)throw new Error(`Invalid banner file type: ${m}`);a.push(`--banner:${m}=${H(M[m],"banner",m)}`)}if(S)for(let m in S){if(m.indexOf("=")>=0)throw new Error(`Invalid footer file type: ${m}`);a.push(`--footer:${m}=${H(S[m],"footer",m)}`)}if(j)for(let m of j)a.push(`--inject:${H(m,"inject")}`);if(f)for(let m in f){if(m.indexOf("=")>=0)throw new Error(`Invalid loader extension: ${m}`);a.push(`--loader:${m}=${H(f[m],"loader",m)}`)}if(c)for(let m in c){if(m.indexOf("=")>=0)throw new Error(`Invalid out extension: ${m}`);a.push(`--out-extension:${m}=${H(c[m],"out extension",m)}`)}if($)if(Array.isArray($))for(let m=0,U=$.length;m<U;m++){let Z=$[m];if(typeof Z=="object"&&Z!==null){let ne=Object.create(null),X=n(Z,ne,"in",p),me=n(Z,ne,"out",p);if(J(Z,ne,"in entry point at index "+m),X===void 0)throw new Error('Missing property "in" for entry point at index '+m);if(me===void 0)throw new Error('Missing property "out" for entry point at index '+m);h.push([me,X])}else h.push(["",H(Z,"entry point at index "+m)])}else for(let m in $)h.push([m,H($[m],"entry point",m)]);if(P){let m=Object.create(null),U=n(P,m,"contents",Ve),Z=n(P,m,"resolveDir",p),ne=n(P,m,"sourcefile",p),X=n(P,m,"loader",p);J(P,m,'in "stdin" object'),ne&&a.push(`--sourcefile=${ne}`),X&&a.push(`--loader=${X}`),Z&&(g=Z),typeof U=="string"?y=re(U):U instanceof Uint8Array&&(y=U)}let ce=[];if(d)for(let m of d)m+="",ce.push(m);return{entries:h,flags:a,write:I,stdinContents:y,stdinResolveDir:g,absWorkingDir:N,nodePaths:ce,mangleCache:He(G)}}function At(e,t,r,i){let l=[],s=Object.create(null);ke(l,t,s,r,i),Qe(l,t,s);let a=n(t,s,"sourcemap",Je),h=n(t,s,"sourcefile",p),o=n(t,s,"loader",p),y=n(t,s,"banner",p),g=n(t,s,"footer",p),k=n(t,s,"mangleCache",te);return J(t,s,`in ${e}() call`),a&&l.push(`--sourcemap=${a===!0?"external":a}`),h&&l.push(`--sourcefile=${h}`),o&&l.push(`--loader=${o}`),y&&l.push(`--banner=${y}`),g&&l.push(`--footer=${g}`),{flags:l,mangleCache:He(k)}}function Ke(e){let t={},r={didClose:!1,reason:""},i={},l=0,s=0,a=new Uint8Array(16*1024),h=0,o=b=>{let w=h+b.length;if(w>a.length){let u=new Uint8Array(w*2);u.set(a),a=u}a.set(b,h),h+=b.length;let d=0;for(;d+4<=h;){let u=qe(a,d);if(d+4+u>h)break;d+=4,_(a.subarray(d,d+u)),d+=u}d>0&&(a.copyWithin(0,d,h),h-=d)},y=b=>{r.didClose=!0,b&&(r.reason=": "+(b.message||b));let w="The service was stopped"+r.reason;for(let d in i)i[d](w,null);i={}},g=(b,w,d)=>{if(r.didClose)return d("The service is no longer running"+r.reason,null);let u=l++;i[u]=(x,O)=>{try{d(x,O)}finally{b&&b.unref()}},b&&b.ref(),e.writeToStdin(_e({id:u,isRequest:!0,value:w}))},k=(b,w)=>{if(r.didClose)throw new Error("The service is no longer running"+r.reason);e.writeToStdin(_e({id:b,isRequest:!1,value:w}))},L=async(b,w)=>{try{if(w.command==="ping"){k(b,{});return}if(typeof w.key=="number"){let d=t[w.key];if(!d)return;let u=d[w.command];if(u){await u(b,w);return}}throw new Error("Invalid command: "+w.command)}catch(d){let u=[ae(d,e,null,void 0,"")];try{k(b,{errors:u})}catch{}}},B=!0,_=b=>{if(B){B=!1;let d=String.fromCharCode(...b);if(d!=="0.19.4")throw new Error(`Cannot start service: Host version "0.19.4" does not match binary version ${Q(d)}`);return}let w=xt(b);if(w.isRequest)L(w.id,w.value);else{let d=i[w.id];delete i[w.id],w.value.error?d(w.value.error,{}):d(null,w.value)}};return{readFromStdout:o,afterClose:y,service:{buildOrContext:({callName:b,refs:w,options:d,isTTY:u,defaultWD:x,callback:O})=>{let F=0,E=s++,f={},c={ref(){++F===1&&w&&w.ref()},unref(){--F===0&&(delete t[E],w&&w.unref())}};t[E]=f,c.ref(),Ct(b,E,g,k,c,e,f,d,u,x,(v,A)=>{try{O(v,A)}finally{c.unref()}})},transform:({callName:b,refs:w,input:d,options:u,isTTY:x,fs:O,callback:F})=>{let E=Xe(),f=c=>{try{if(typeof d!="string"&&!(d instanceof Uint8Array))throw new Error('The input to "transform" must be a string or a Uint8Array');let{flags:v,mangleCache:A}=At(b,u,x,Ne),D={command:"transform",flags:v,inputFS:c!==null,input:c!==null?re(c):typeof d=="string"?re(d):d};A&&(D.mangleCache=A),g(w,D,(C,j)=>{if(C)return F(new Error(C),null);let M=he(j.errors,E),S=he(j.warnings,E),$=1,N=()=>{if(--$===0){let P={warnings:S,code:j.code,map:j.map,mangleCache:void 0,legalComments:void 0};"legalComments"in j&&(P.legalComments=j?.legalComments),j.mangleCache&&(P.mangleCache=j?.mangleCache),F(null,P)}};if(M.length>0)return F(ge("Transform failed",M,S),null);j.codeFS&&($++,O.readFile(j.code,(P,I)=>{P!==null?F(P,null):(j.code=I,N())})),j.mapFS&&($++,O.readFile(j.map,(P,I)=>{P!==null?F(P,null):(j.map=I,N())})),N()})}catch(v){let A=[];try{ke(A,u,{},x,Ne)}catch{}let D=ae(v,e,E,void 0,"");g(w,{command:"error",flags:A,error:D},()=>{D.detail=E.load(D.detail),F(ge("Transform failed",[D],[]),null)})}};if((typeof d=="string"||d instanceof Uint8Array)&&d.length>1024*1024){let c=f;f=()=>O.writeFile(d,c)}f(null)},formatMessages:({callName:b,refs:w,messages:d,options:u,callback:x})=>{let O=ie(d,"messages",null,"");if(!u)throw new Error(`Missing second argument in ${b}() call`);let F={},E=n(u,F,"kind",p),f=n(u,F,"color",W),c=n(u,F,"terminalWidth",oe);if(J(u,F,`in ${b}() call`),E===void 0)throw new Error(`Missing "kind" in ${b}() call`);if(E!=="error"&&E!=="warning")throw new Error(`Expected "kind" to be "error" or "warning" in ${b}() call`);let v={command:"format-msgs",messages:O,isWarning:E==="warning"};f!==void 0&&(v.color=f),c!==void 0&&(v.terminalWidth=c),g(w,v,(A,D)=>{if(A)return x(new Error(A),null);x(null,D.messages)})},analyzeMetafile:({callName:b,refs:w,metafile:d,options:u,callback:x})=>{u===void 0&&(u={});let O={},F=n(u,O,"color",W),E=n(u,O,"verbose",W);J(u,O,`in ${b}() call`);let f={command:"analyze-metafile",metafile:d};F!==void 0&&(f.color=F),E!==void 0&&(f.verbose=E),g(w,f,(c,v)=>{if(c)return x(new Error(c),null);x(null,v.result)})}}}}function Ct(e,t,r,i,l,s,a,h,o,y,g){let k=Xe(),L=e==="context",B=(T,z)=>{let Y=[];try{ke(Y,h,{},o,Be)}catch{}let b=ae(T,s,k,void 0,z);r(l,{command:"error",flags:Y,error:b},()=>{b.detail=k.load(b.detail),g(ge(L?"Context failed":"Build failed",[b],[]),null)})},_;if(typeof h=="object"){let T=h.plugins;if(T!==void 0){if(!Array.isArray(T))return B(new Error('"plugins" must be an array'),"");_=T}}if(_&&_.length>0){if(s.isSync)return B(new Error("Cannot use plugins in synchronous API calls"),"");Dt(t,r,i,l,s,a,h,_,k).then(T=>{if(!T.ok)return B(T.error,T.pluginName);try{R(T.requestPlugins,T.runOnEndCallbacks,T.scheduleOnDisposeCallbacks)}catch(z){B(z,"")}},T=>B(T,""));return}try{R(null,(T,z)=>z([],[]),()=>{})}catch(T){B(T,"")}function R(T,z,Y){let b=s.hasFS,{entries:w,flags:d,write:u,stdinContents:x,stdinResolveDir:O,absWorkingDir:F,nodePaths:E,mangleCache:f}=Ot(e,h,o,Be,b);if(u&&!s.hasFS)throw new Error('The "write" option is unavailable in this environment');let c={command:"build",key:t,entries:w,flags:d,write:u,stdinContents:x,stdinResolveDir:O,absWorkingDir:F||y,nodePaths:E,context:L};T&&(c.plugins=T),f&&(c.mangleCache=f);let v=(C,j)=>{let M={errors:he(C.errors,k),warnings:he(C.warnings,k),outputFiles:void 0,metafile:void 0,mangleCache:void 0},S=M.errors.slice(),$=M.warnings.slice();C.outputFiles&&(M.outputFiles=C.outputFiles.map(Mt)),C.metafile&&(M.metafile=JSON.parse(C.metafile)),C.mangleCache&&(M.mangleCache=C.mangleCache),C.writeToStdout!==void 0&&console.log(de(C.writeToStdout).replace(/\n$/,"")),z(M,(N,P)=>{if(S.length>0||N.length>0){let I=ge("Build failed",S.concat(N),$.concat(P));return j(I,null,N,P)}j(null,M,N,P)})},A,D;L&&(a["on-end"]=(C,j)=>new Promise(M=>{v(j,(S,$,N,P)=>{let I={errors:N,warnings:P};D&&D(S,$),A=void 0,D=void 0,i(C,I),M()})})),r(l,c,(C,j)=>{if(C)return g(new Error(C),null);if(!L)return v(j,($,N)=>(Y(),g($,N)));if(j.errors.length>0)return g(ge("Context failed",j.errors,j.warnings),null);let M=!1,S={rebuild:()=>(A||(A=new Promise(($,N)=>{let P;D=(V,G)=>{P||(P=()=>V?N(V):$(G))};let I=()=>{r(l,{command:"rebuild",key:t},(G,ce)=>{G?N(new Error(G)):P?P():I()})};I()})),A),watch:($={})=>new Promise((N,P)=>{if(!s.hasFS)throw new Error('Cannot use the "watch" API in this environment');J($,{},"in watch() call"),r(l,{command:"watch",key:t},G=>{G?P(new Error(G)):N(void 0)})}),serve:($={})=>new Promise((N,P)=>{if(!s.hasFS)throw new Error('Cannot use the "serve" API in this environment');let I={},V=n($,I,"port",oe),G=n($,I,"host",p),ce=n($,I,"servedir",p),m=n($,I,"keyfile",p),U=n($,I,"certfile",p),Z=n($,I,"fallback",p),ne=n($,I,"onRequest",Ye);J($,I,"in serve() call");let X={command:"serve",key:t,onRequest:!!ne};V!==void 0&&(X.port=V),G!==void 0&&(X.host=G),ce!==void 0&&(X.servedir=ce),m!==void 0&&(X.keyfile=m),U!==void 0&&(X.certfile=U),Z!==void 0&&(X.fallback=Z),r(l,X,(me,it)=>{if(me)return P(new Error(me));ne&&(a["serve-request"]=(lt,at)=>{ne(at.args),i(lt,{})}),N(it)})}),cancel:()=>new Promise($=>{if(M)return $();r(l,{command:"cancel",key:t},()=>{$()})}),dispose:()=>new Promise($=>{if(M)return $();M=!0,r(l,{command:"dispose",key:t},()=>{$(),Y(),l.unref()})})};l.ref(),g(null,S)})}}var Dt=async(e,t,r,i,l,s,a,h,o)=>{let y=[],g=[],k={},L={},B=[],_=0,R=0,T=[],z=!1;h=[...h];for(let w of h){let d={};if(typeof w!="object")throw new Error(`Plugin at index ${R} must be an object`);let u=n(w,d,"name",p);if(typeof u!="string"||u==="")throw new Error(`Plugin at index ${R} is missing a name`);try{let x=n(w,d,"setup",Ye);if(typeof x!="function")throw new Error("Plugin is missing a setup function");J(w,d,`on plugin ${Q(u)}`);let O={name:u,onStart:!1,onEnd:!1,onResolve:[],onLoad:[]};R++;let E=x({initialOptions:a,resolve:(f,c={})=>{if(!z)throw new Error('Cannot call "resolve" before plugin setup has completed');if(typeof f!="string")throw new Error("The path to resolve must be a string");let v=Object.create(null),A=n(c,v,"pluginName",p),D=n(c,v,"importer",p),C=n(c,v,"namespace",p),j=n(c,v,"resolveDir",p),M=n(c,v,"kind",p),S=n(c,v,"pluginData",Ee);return J(c,v,"in resolve() call"),new Promise(($,N)=>{let P={command:"resolve",path:f,key:e,pluginName:u};if(A!=null&&(P.pluginName=A),D!=null&&(P.importer=D),C!=null&&(P.namespace=C),j!=null&&(P.resolveDir=j),M!=null)P.kind=M;else throw new Error('Must specify "kind" when calling "resolve"');S!=null&&(P.pluginData=o.store(S)),t(i,P,(I,V)=>{I!==null?N(new Error(I)):$({errors:he(V.errors,o),warnings:he(V.warnings,o),path:V.path,external:V.external,sideEffects:V.sideEffects,namespace:V.namespace,suffix:V.suffix,pluginData:o.load(V.pluginData)})})})},onStart(f){let c='This error came from the "onStart" callback registered here:',v=be(new Error(c),l,"onStart");y.push({name:u,callback:f,note:v}),O.onStart=!0},onEnd(f){let c='This error came from the "onEnd" callback registered here:',v=be(new Error(c),l,"onEnd");g.push({name:u,callback:f,note:v}),O.onEnd=!0},onResolve(f,c){let v='This error came from the "onResolve" callback registered here:',A=be(new Error(v),l,"onResolve"),D={},C=n(f,D,"filter",Se),j=n(f,D,"namespace",p);if(J(f,D,`in onResolve() call for plugin ${Q(u)}`),C==null)throw new Error("onResolve() call is missing a filter");let M=_++;k[M]={name:u,callback:c,note:A},O.onResolve.push({id:M,filter:C.source,namespace:j||""})},onLoad(f,c){let v='This error came from the "onLoad" callback registered here:',A=be(new Error(v),l,"onLoad"),D={},C=n(f,D,"filter",Se),j=n(f,D,"namespace",p);if(J(f,D,`in onLoad() call for plugin ${Q(u)}`),C==null)throw new Error("onLoad() call is missing a filter");let M=_++;L[M]={name:u,callback:c,note:A},O.onLoad.push({id:M,filter:C.source,namespace:j||""})},onDispose(f){B.push(f)},esbuild:l.esbuild});E&&await E,T.push(O)}catch(x){return{ok:!1,error:x,pluginName:u}}}s["on-start"]=async(w,d)=>{let u={errors:[],warnings:[]};await Promise.all(y.map(async({name:x,callback:O,note:F})=>{try{let E=await O();if(E!=null){if(typeof E!="object")throw new Error(`Expected onStart() callback in plugin ${Q(x)} to return an object`);let f={},c=n(E,f,"errors",q),v=n(E,f,"warnings",q);J(E,f,`from onStart() callback in plugin ${Q(x)}`),c!=null&&u.errors.push(...ie(c,"errors",o,x)),v!=null&&u.warnings.push(...ie(v,"warnings",o,x))}}catch(E){u.errors.push(ae(E,l,o,F&&F(),x))}})),r(w,u)},s["on-resolve"]=async(w,d)=>{let u={},x="",O,F;for(let E of d.ids)try{({name:x,callback:O,note:F}=k[E]);let f=await O({path:d.path,importer:d.importer,namespace:d.namespace,resolveDir:d.resolveDir,kind:d.kind,pluginData:o.load(d.pluginData)});if(f!=null){if(typeof f!="object")throw new Error(`Expected onResolve() callback in plugin ${Q(x)} to return an object`);let c={},v=n(f,c,"pluginName",p),A=n(f,c,"path",p),D=n(f,c,"namespace",p),C=n(f,c,"suffix",p),j=n(f,c,"external",W),M=n(f,c,"sideEffects",W),S=n(f,c,"pluginData",Ee),$=n(f,c,"errors",q),N=n(f,c,"warnings",q),P=n(f,c,"watchFiles",q),I=n(f,c,"watchDirs",q);J(f,c,`from onResolve() callback in plugin ${Q(x)}`),u.id=E,v!=null&&(u.pluginName=v),A!=null&&(u.path=A),D!=null&&(u.namespace=D),C!=null&&(u.suffix=C),j!=null&&(u.external=j),M!=null&&(u.sideEffects=M),S!=null&&(u.pluginData=o.store(S)),$!=null&&(u.errors=ie($,"errors",o,x)),N!=null&&(u.warnings=ie(N,"warnings",o,x)),P!=null&&(u.watchFiles=xe(P,"watchFiles")),I!=null&&(u.watchDirs=xe(I,"watchDirs"));break}}catch(f){u={id:E,errors:[ae(f,l,o,F&&F(),x)]};break}r(w,u)},s["on-load"]=async(w,d)=>{let u={},x="",O,F;for(let E of d.ids)try{({name:x,callback:O,note:F}=L[E]);let f=await O({path:d.path,namespace:d.namespace,suffix:d.suffix,pluginData:o.load(d.pluginData)});if(f!=null){if(typeof f!="object")throw new Error(`Expected onLoad() callback in plugin ${Q(x)} to return an object`);let c={},v=n(f,c,"pluginName",p),A=n(f,c,"contents",Ve),D=n(f,c,"resolveDir",p),C=n(f,c,"pluginData",Ee),j=n(f,c,"loader",p),M=n(f,c,"errors",q),S=n(f,c,"warnings",q),$=n(f,c,"watchFiles",q),N=n(f,c,"watchDirs",q);J(f,c,`from onLoad() callback in plugin ${Q(x)}`),u.id=E,v!=null&&(u.pluginName=v),A instanceof Uint8Array?u.contents=A:A!=null&&(u.contents=re(A)),D!=null&&(u.resolveDir=D),C!=null&&(u.pluginData=o.store(C)),j!=null&&(u.loader=j),M!=null&&(u.errors=ie(M,"errors",o,x)),S!=null&&(u.warnings=ie(S,"warnings",o,x)),$!=null&&(u.watchFiles=xe($,"watchFiles")),N!=null&&(u.watchDirs=xe(N,"watchDirs"));break}}catch(f){u={id:E,errors:[ae(f,l,o,F&&F(),x)]};break}r(w,u)};let Y=(w,d)=>d([],[]);g.length>0&&(Y=(w,d)=>{(async()=>{let u=[],x=[];for(let{name:O,callback:F,note:E}of g){let f,c;try{let v=await F(w);if(v!=null){if(typeof v!="object")throw new Error(`Expected onEnd() callback in plugin ${Q(O)} to return an object`);let A={},D=n(v,A,"errors",q),C=n(v,A,"warnings",q);J(v,A,`from onEnd() callback in plugin ${Q(O)}`),D!=null&&(f=ie(D,"errors",o,O)),C!=null&&(c=ie(C,"warnings",o,O))}}catch(v){f=[ae(v,l,o,E&&E(),O)]}if(f){u.push(...f);try{w.errors.push(...f)}catch{}}if(c){x.push(...c);try{w.warnings.push(...c)}catch{}}}d(u,x)})()});let b=()=>{for(let w of B)setTimeout(()=>w(),0)};return z=!0,{ok:!0,requestPlugins:T,runOnEndCallbacks:Y,scheduleOnDisposeCallbacks:b}};function Xe(){let e=new Map,t=0;return{load(r){return e.get(r)},store(r){if(r===void 0)return-1;let i=t++;return e.set(i,r),i}}}function be(e,t,r){let i,l=!1;return()=>{if(l)return i;l=!0;try{let s=(e.stack+"").split(`
`);s.splice(1,1);let a=Ge(t,s,r);if(a)return i={text:e.message,location:a},i}catch{}}}function ae(e,t,r,i,l){let s="Internal error",a=null;try{s=(e&&e.message||e)+""}catch{}try{a=Ge(t,(e.stack+"").split(`
`),"")}catch{}return{id:"",pluginName:l,text:s,location:a,notes:i?[i]:[],detail:r?r.store(e):-1}}function Ge(e,t,r){let i="    at ";if(e.readFileSync&&!t[0].startsWith(i)&&t[1].startsWith(i))for(let l=1;l<t.length;l++){let s=t[l];if(s.startsWith(i))for(s=s.slice(i.length);;){let a=/^(?:new |async )?\S+ \((.*)\)$/.exec(s);if(a){s=a[1];continue}if(a=/^eval at \S+ \((.*)\)(?:, \S+:\d+:\d+)?$/.exec(s),a){s=a[1];continue}if(a=/^(\S+):(\d+):(\d+)$/.exec(s),a){let h;try{h=e.readFileSync(a[1],"utf8")}catch{break}let o=h.split(/\r\n|\r|\n|\u2028|\u2029/)[+a[2]-1]||"",y=+a[3]-1,g=o.slice(y,y+r.length)===r?r.length:0;return{file:a[1],namespace:"file",line:+a[2],column:re(o.slice(0,y)).length,length:re(o.slice(y,y+g)).length,lineText:o+`
`+t.slice(1).join(`
`),suggestion:""}}break}}return null}function ge(e,t,r){let i=5;e+=t.length<1?"":` with ${t.length} error${t.length<2?"":"s"}:`+t.slice(0,i+1).map((s,a)=>{if(a===i)return`
...`;if(!s.location)return`
error: ${s.text}`;let{file:h,line:o,column:y}=s.location,g=s.pluginName?`[plugin: ${s.pluginName}] `:"";return`
${h}:${o}:${y}: ERROR: ${g}${s.text}`}).join("");let l=new Error(e);for(let[s,a]of[["errors",t],["warnings",r]])Object.defineProperty(l,s,{configurable:!0,enumerable:!0,get:()=>a,set:h=>Object.defineProperty(l,s,{configurable:!0,enumerable:!0,value:h})});return l}function he(e,t){for(let r of e)r.detail=t.load(r.detail);return e}function Re(e,t){if(e==null)return null;let r={},i=n(e,r,"file",p),l=n(e,r,"namespace",p),s=n(e,r,"line",oe),a=n(e,r,"column",oe),h=n(e,r,"length",oe),o=n(e,r,"lineText",p),y=n(e,r,"suggestion",p);return J(e,r,t),{file:i||"",namespace:l||"",line:s||0,column:a||0,length:h||0,lineText:o||"",suggestion:y||""}}function ie(e,t,r,i){let l=[],s=0;for(let a of e){let h={},o=n(a,h,"id",p),y=n(a,h,"pluginName",p),g=n(a,h,"text",p),k=n(a,h,"location",Ie),L=n(a,h,"notes",q),B=n(a,h,"detail",Ee),_=`in element ${s} of "${t}"`;J(a,h,_);let R=[];if(L)for(let T of L){let z={},Y=n(T,z,"text",p),b=n(T,z,"location",Ie);J(T,z,_),R.push({text:Y||"",location:Re(b,_)})}l.push({id:o||"",pluginName:y||i,text:g||"",location:Re(k,_),notes:R,detail:r?r.store(B):-1}),s++}return l}function xe(e,t){let r=[];for(let i of e){if(typeof i!="string")throw new Error(`${Q(t)} must be an array of strings`);r.push(i)}return r}function Mt({path:e,contents:t,hash:r}){let i=null;return{path:e,contents:t,hash:r,get text(){let l=this.contents;return(i===null||l!==t)&&(t=l,i=de(l)),i}}}var Ze=require("child_process"),Ft=require("crypto"),De=require("path"),se=require("fs"),Tt=require("os"),_t=require("tty"),K;if(process.env.ESBUILD_WORKER_THREADS!=="0"){try{K=require("worker_threads")}catch{}let[e,t]=process.versions.node.split(".");(+e<12||+e==12&&+t<17||+e==13&&+t<13)&&(K=void 0)}var Ue,ye=((Ue=K?.workerData)==null?void 0:Ue.esbuildVersion)==="0.19.4",Bt=()=>{if(!ESBUILD_BINARY_PATH&&(De.basename(__filename)!=="main.js"||De.basename(__dirname)!=="lib"))throw new Error(`The esbuild JavaScript API cannot be bundled. Please mark the "esbuild" package as external so it's not included in the bundle.

More information: The file containing the code for esbuild's JavaScript API (${__filename}) does not appear to be inside the esbuild package on the file system, which usually means that the esbuild package was bundled into another file. This is problematic because the API needs to run a binary executable inside the esbuild package which is located using a relative path from the API code to the executable. If the esbuild package is bundled, the relative path will be incorrect and the executable won't be found.`);{let{binPath:e,isWASM:t}=generateBinPath();return t?["node",[e]]:[e,[]]}},we=()=>_t.isatty(2),Nt={readFile(e,t){try{let r=se.readFileSync(e,"utf8");try{se.unlinkSync(e)}catch{}t(null,r)}catch(r){t(r,null)}},writeFile(e,t){try{let r=et();se.writeFileSync(r,e),t(r)}catch{t(null)}}},Lt={readFile(e,t){try{se.readFile(e,"utf8",(r,i)=>{try{se.unlink(e,()=>t(r,i))}catch{t(r,i)}})}catch(r){t(r,null)}},writeFile(e,t){try{let r=et();se.writeFile(r,e,i=>t(i!==null?null:r))}catch{t(null)}}},It="0.19.4",Rt=e=>fe().build(e),Ut=e=>fe().context(e),Wt=(e,t)=>fe().transform(e,t),zt=(e,t)=>fe().formatMessages(e,t),qt=(e,t)=>fe().analyzeMetafile(e,t),Yt=e=>{if(K&&!ye)return ee||(ee=Pe(K)),ee.buildSync(e);let t;return je(r=>r.buildOrContext({callName:"buildSync",refs:null,options:e,isTTY:we(),defaultWD:ue,callback:(i,l)=>{if(i)throw i;t=l}})),t},Jt=(e,t)=>{if(K&&!ye)return ee||(ee=Pe(K)),ee.transformSync(e,t);let r;return je(i=>i.transform({callName:"transformSync",refs:null,input:e,options:t||{},isTTY:we(),fs:Nt,callback:(l,s)=>{if(l)throw l;r=s}})),r},Vt=(e,t)=>{if(K&&!ye)return ee||(ee=Pe(K)),ee.formatMessagesSync(e,t);let r;return je(i=>i.formatMessages({callName:"formatMessagesSync",refs:null,messages:e,options:t,callback:(l,s)=>{if(l)throw l;r=s}})),r},Ht=(e,t)=>{if(K&&!ye)return ee||(ee=Pe(K)),ee.analyzeMetafileSync(e,t);let r;return je(i=>i.analyzeMetafile({callName:"analyzeMetafileSync",refs:null,metafile:typeof e=="string"?e:JSON.stringify(e),options:t,callback:(l,s)=>{if(l)throw l;r=s}})),r},We=!1,Qt=e=>{if(e=Pt(e||{}),e.wasmURL)throw new Error('The "wasmURL" option only works in the browser');if(e.wasmModule)throw new Error('The "wasmModule" option only works in the browser');if(e.worker)throw new Error('The "worker" option only works in the browser');if(We)throw new Error('Cannot call "initialize" more than once');return fe(),We=!0,Promise.resolve()},ue=process.cwd(),$e,fe=()=>{if($e)return $e;let e=process.env.ESBUILD_BINARY_PATH,t=[],r=Ze.spawn(e,t.concat("--service=0.19.4","--ping"),{windowsHide:!0,stdio:["pipe","pipe","inherit"],cwd:ue}),{readFromStdout:i,afterClose:l,service:s}=Ke({writeToStdin(g){r.stdin.write(g,k=>{k&&l(k)})},readFileSync:se.readFileSync,isSync:!1,hasFS:!0,esbuild:pe});r.stdin.on("error",l),r.on("error",l);let a=r.stdin,h=r.stdout;h.on("data",i),h.on("end",l);let o=0;r.unref(),a.unref&&a.unref(),h.unref&&h.unref();let y={ref(){++o===1&&r.ref()},unref(){--o===0&&r.unref()}};return $e={build:g=>new Promise((k,L)=>{s.buildOrContext({callName:"build",refs:y,options:g,isTTY:we(),defaultWD:ue,callback:(B,_)=>B?L(B):k(_)})}),context:g=>new Promise((k,L)=>s.buildOrContext({callName:"context",refs:y,options:g,isTTY:we(),defaultWD:ue,callback:(B,_)=>B?L(B):k(_)})),transform:(g,k)=>new Promise((L,B)=>s.transform({callName:"transform",refs:y,input:g,options:k||{},isTTY:we(),fs:Lt,callback:(_,R)=>_?B(_):L(R)})),formatMessages:(g,k)=>new Promise((L,B)=>s.formatMessages({callName:"formatMessages",refs:y,messages:g,options:k,callback:(_,R)=>_?B(_):L(R)})),analyzeMetafile:(g,k)=>new Promise((L,B)=>s.analyzeMetafile({callName:"analyzeMetafile",refs:y,metafile:typeof g=="string"?g:JSON.stringify(g),options:k,callback:(_,R)=>_?B(_):L(R)}))},$e},je=e=>{let[t,r]=Bt(),i=new Uint8Array,{readFromStdout:l,afterClose:s,service:a}=Ke({writeToStdin(o){if(i.length!==0)throw new Error("Must run at most one command");i=o},isSync:!0,hasFS:!0,esbuild:pe});e(a);let h=Ze.execFileSync(t,r.concat("--service=0.19.4"),{cwd:ue,windowsHide:!0,input:i,maxBuffer:+process.env.ESBUILD_MAX_BUFFER||16*1024*1024});l(h),s(null)},et=()=>De.join(Tt.tmpdir(),`esbuild-${Ft.randomBytes(32).toString("hex")}`),ee=null,Pe=e=>{let{port1:t,port2:r}=new e.MessageChannel,i=new e.Worker(__filename,{workerData:{workerPort:r,defaultWD:ue,esbuildVersion:"0.19.4"},transferList:[r],execArgv:[]}),l=0,s=y=>{let g=new Error(`Build failed with 1 error:
error: ${y}`),k=[{id:"",pluginName:"",text:y,location:null,notes:[],detail:void 0}];return g.errors=k,g.warnings=[],g},a=y=>{if(!y)return;let g=y.plugins;if(g&&g.length>0)throw s("Cannot use plugins in synchronous API calls")},h=(y,g)=>{for(let k in g)y[k]=g[k]},o=(y,g)=>{let k=l++,L=new SharedArrayBuffer(8),B=new Int32Array(L),_={sharedBuffer:L,id:k,command:y,args:g};i.postMessage(_);let R=Atomics.wait(B,0,0);if(R!=="ok"&&R!=="not-equal")throw new Error("Internal error: Atomics.wait() failed: "+R);let{message:{id:T,resolve:z,reject:Y,properties:b}}=e.receiveMessageOnPort(t);if(k!==T)throw new Error(`Internal error: Expected id ${k} but got id ${T}`);if(Y)throw h(Y,b),Y;return z};return i.unref(),{buildSync(y){return a(y),o("build",[y])},transformSync(y,g){return o("transform",[y,g])},formatMessagesSync(y,g){return o("formatMessages",[y,g])},analyzeMetafileSync(y,g){return o("analyzeMetafile",[y,g])}}},Kt=()=>{let e=K.workerData.workerPort,t=K.parentPort,r=i=>{let l={};if(i&&typeof i=="object")for(let s in i)l[s]=i[s];return l};try{let i=fe();ue=K.workerData.defaultWD,t.on("message",l=>{(async()=>{let{sharedBuffer:s,id:a,command:h,args:o}=l,y=new Int32Array(s);try{switch(h){case"build":e.postMessage({id:a,resolve:await i.build(o[0])});break;case"transform":e.postMessage({id:a,resolve:await i.transform(o[0],o[1])});break;case"formatMessages":e.postMessage({id:a,resolve:await i.formatMessages(o[0],o[1])});break;case"analyzeMetafile":e.postMessage({id:a,resolve:await i.analyzeMetafile(o[0],o[1])});break;default:throw new Error(`Invalid command: ${h}`)}}catch(g){e.postMessage({id:a,reject:g,properties:r(g)})}Atomics.add(y,0,1),Atomics.notify(y,0,1/0)})()})}catch(i){t.on("message",l=>{let{sharedBuffer:s,id:a}=l,h=new Int32Array(s);e.postMessage({id:a,reject:i,properties:r(i)}),Atomics.add(h,0,1),Atomics.notify(h,0,1/0)})}};ye&&Kt();var Xt=pe});var er={};ht(er,{main:()=>Gt});module.exports=mt(er);var le=Oe(require("node:path")),Fe=Oe(require("node:fs/promises")),nt=Oe(rt());async function Gt(e){let t=JSON.parse(process.argv[3]);await Zt(e,t)}async function Zt(e,t){let r=le.default.join(__dirname,"..","root"),i=[];t.fresh&&i.push(Fe.default.copyFile(le.default.join(r,"index.html"),le.default.join(t.cache,"index.html")),Fe.default.copyFile(le.default.join(r,"lib.js"),le.default.join(t.cache,"lib.js"))),process.env.ESBUILD_BINARY_PATH=t.esbuild;let l=le.default.join(t.cache,"out.js"),s={name:"reloadPlugin",setup(h){h.onEnd(o=>{o.errors.length==0&&e.loadFile(le.default.join(t.cache,"index.html"))})}},a=await nt.context({entryPoints:[t.entry],absWorkingDir:t.wd,outfile:l,bundle:!0,jsxFactory:"h",jsxFragment:"Fragment",plugins:[s]});i.push(a.watch()),await Promise.all(i)}0&&(module.exports={main});
